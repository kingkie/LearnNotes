1.中间件在这里是指注入到应用中处理请求和响应的组件。
Redis高可用方案：
主从同步流程：
1、当我们为master配置了一个slave，不管这个slave是否是第一次连接上Master，它都会发送一个PSYNC命令给master请求复制数据。
2、master收到PSYNC命令后，会在后台进行数据持久化通过bgsave生成最新的rdb快照文件
3、持久化期间，master会继续接收客户端的请求，它会把这些可能修改数据集的请求缓存在内存中。
4、当持久化进行完毕以后，master会把这份rdb文件数据集发送给slave，slave会把接收到的数据进行持久化生成rdb，然后再加载到内存中。
5、master再将之前缓存在内存中的命令发送给slave。
　　PS：当master与slave之间的连接由于某些原因而断开时，slave能够自动重连Master，如果master收到了多个slave并发连接请求，它只会进行一次持久化，而不是一个连接一次，然后再把这一份持久化的数据发送给多个并发连接的slave。

　　PS：SYNC使用的是全量复制，PSYNC使用的是增量复制。

　　PS：主从结构一般会设置成：主节点负责写入，从节点负责备份和读取。

      PS：主从同步与开不开启持久化无关，是redis服务端做的事情。至于为什么用rdb文件来同步也是因为rdb是二进制形式的数据，同步起来比aof更快。
      PS：主节点一般配置不超过10个G因为太大了会影响同步时的效率
